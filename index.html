<!DOCTYPE html>
<html lang="en">

<link rel="manifest" href="./manifest.json">

<style>
    div.a {
        text-align: center;
    }
</style>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>top vakantie planning</title>
</head>
<style>
    body,
    html {
        margin: 0;
    }

    table,
    th,
    td {
        border: 1px solid black;
    }

    .flex-container {
        display: flex;
        justify-content: center;
    }

    .flex-container>div {
        background-color: #cdc9c9;
        font-size: 30px;
    }

    header {
        background-color: #666;
        padding: 20px;
        max-width: 100%;
        text-align: center;
        font-size: 35px;
        color: white;
        width: 100%;
    }

    nav {
        width: 100%;
        height: 100%;
        /* only for demonstration, should be removed */
        background: #cdc9c9;
        /* padding: 20px; */
        text-align: center;

    }

    table {
        border-collapse: collapse;
        width: 80%;
    }
</style>



<body>
    <header>
        <h1>vakantie planner.</h1>
        <h4>het is nu: <span id="demo"></span></h4>
        <h4>moment:<span id="activiteit"></span></h4>
        <h4>van tot:<span id="startminuten"></span>-<span id="eindminuten"></span></h4>
    </header>



    <nav>
        <div class="flex-container">
            <table id="schedule" ,style="width:30%">
                <th>uur</th>
                <th>wat te doen</th>

                <tr>
                    <td>7u45</td>
                    <td>niet vroeger douchen</td>
                </tr>
                <tr>
                    <td>8u15</td>
                    <td>wekken</td>
                </tr>
                <tr>
                    <td>8u30</td>
                    <td>eten</td>
                </tr>
                <tr>
                    <td>9u15</td>
                    <td>verzamelen arena - lesmoment 1</td>
                </tr>
                <tr>
                    <td>10u45</td>
                    <td>pauze bar</td>
                </tr>
                <tr>
                    <td>11u05</td>
                    <td>lesmoment 2</td>
                </tr>
                <tr>
                    <td>12u30</td>
                    <td>middageten en vrij</td>
                </tr>
                <tr>
                    <td>13u45</td>
                    <td>verzamelen arena - lesmoment 3</td>
                </tr>
                <tr>
                    <td>15u15</td>
                    <td>pauzen - verzamelen</td>
                </tr>
                <tr>
                    <td>15u20</td>
                    <td>verzamelen bronne - start namiiddagactiviteiten</td>
                </tr>
                <tr>
                    <td>17u45</td>
                    <td>vrij</td>
                </tr>
                <tr>
                    <td>18u30</td>
                    <td>avondeten - vrij</td>
                </tr>
                <tr>
                    <td>19u45</td>
                    <td>verzamelen arena - start avondactiviteiten</td>
                </tr>
                <tr>
                    <td>21u30</td>
                    <td>vrij - bar</td>
                </tr>
                <tr>
                    <td>22u00</td>
                    <td>niet meer douchen</td>
                </tr>
                <tr>
                    <td>22u00</td>
                    <td>slapen gaan 1e graad blauw bandje</td>
                </tr>
                <tr>
                    <td>22u30</td>
                    <td>slapen gaan 2e graad groen bandje</td>
                </tr>
                <tr>
                    <td>22u45</td>
                    <td>slapen gaan 3e graad rood bandje</td>
                </tr>
        </div>
    </nav>

</body>



<script>

    const element = document.getElementById("demo");
    setInterval(function () {
        const d = new Date();
        let text = d.toLocaleTimeString();

        const huidigeMinuten = d.getMinutes() + d.getHours() * 60;

        for (let index = 0; index < betterschedule.length; index += 1) {
            //als huidige minuten <= eind minuten van element en >= start minuten van element ==> das de huidige activiteit
            const huidigElement = betterschedule[index];
            if (huidigeMinuten <= huidigElement.eindMinuten && huidigElement.startMinuten <= huidigeMinuten) {
                document.querySelector("#activiteit").innerHTML = huidigElement.activity;
                document.querySelector("#startminuten").innerHTML = huidigElement.startTijd;
                document.querySelector("#eindminuten").innerHTML = huidigElement.eindTijd;

            }
        }


        document.getElementById("demo").innerHTML = text;
    }, 100);

</script>

<script>
    const schedule = [
        { time: '7:45', activity: 'nietvroeger douchen' },
        { time: '8:15', activity: 'wekken' },
        { time: '8:30', activity: 'eten' },
        { time: '9:15', activity: 'verzamelen arena - lesmoment 1' },
        { time: '10:45', activity: 'pauze bar' },
        { time: '11:05', activity: 'lesmoment 2' },
        { time: '12:30', activity: 'middageten en vrij' },
        { time: '13:45', activity: 'verzamelen arena - lesmoment 3' },
        { time: '15:15', activity: 'pauze - verzamelen' },
        { time: '15:20', activity: 'verzamelen bronne - start namiiddagactiviteiten' },
        { time: '17:45', activity: 'vrij' },
        { time: '18:30', activity: 'avondeten - vrij' },
        { time: '19:45', activity: 'verzamelen arena - start avondactiviteiten' },
        { time: '21:30', activity: 'vrij - bar' },
        { time: '22:00', activity: 'niet meer douchen' },
        { time: '22:00', activity: 'slapen gaan 1e graad blauw bandje' },
        { time: '22:30', activity: 'slapen gaan 2e graad groen bandje' },
        { time: '22:45', activity: 'slapen gaan 3e graad rood bandje' },
    ]

</script>

<script>
    let betterschedule = [];

    for (let index = 0; index < schedule.length; index += 1) {
        const huidigElement = schedule[index];

        const uurEnMinuten = huidigElement.time.split(':').map(Number);


        const uur = uurEnMinuten[0] //22
        const minuten = uurEnMinuten[1]// 0 

        const startminuten = uur * 60 + minuten;

        const volgendeIndex = (index + 1) % schedule.length;

        const volgendElement = schedule[volgendeIndex];

        const volgendeuurEnMinuten = volgendElement.time.split(':').map(Number);
        const volgendeuur = volgendeuurEnMinuten[0]
        const volgendeminuten = volgendeuurEnMinuten[1]
        const volgendestartminuten = volgendeuur * 60 + volgendeminuten;


        const eindminuten = volgendElement.time
        const eindtijd = volgendestartminuten
        const beteritem = {
            startTijd: huidigElement.time,
            startMinuten: startminuten,
            eindMinuten: eindtijd,
            activity: huidigElement.activity,
            eindTijd: volgendElement.time

        }

        betterschedule.push(beteritem);
    }

    console.log(betterschedule);
</script>

<script>
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('./sw.js')
            .then(registration => {
                console.log('Excellent, registered with scope:', registration.scope);
            })
            .catch(error => {
                console.error('Service worker registration failed:', error);
            });
    }
</script>

</html>